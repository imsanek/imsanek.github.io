<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="description" content="Бутик отель История в Алуште">
        <meta name="keywords" content="Бутик отель История в Алуште">
        <meta name="format-detection" content="telephone=no">
        <meta http-equiv="Cache-Control" content="no-cache">
        <title>Бутик отель История в Алуште</title>
        <link href="price.css" rel="stylesheet" type="text/css">
    
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
    </head>
    <body>
        <img src="../img/map2.jpg" alt="background" class="body_bg">
        <div class="panel">
            <div class="list">
                <div class="number" id="1">
                    <img src="https://hotel-istoria.ru/img/room/big_OxyU5.jpg" alt="Инь-Янь (студио)">
                        <span>
                            Инь-Янь ( люкс )
                        </span>
                        <div class="price" id="1"></div>
                        <input type="text" class="price-input" name="price-input" placeholder="Новая цена">
                        <button class="button" id="1">Изменить</button>                  
                </div>
                <div class="number" id="2">
                    <img src="https://hotel-istoria.ru/img/room/big_aQQEFc.JPG" alt="Благодать (студио)">
                    <span>
                        Благодать ( люкс )
                    </span>
                    <div class="price" id="2"></div>
                        <input type="text" class="price-input" name="price-input" placeholder="Новая цена">
                        <button class="button" id="2">Изменить</button>  
                </div>
                <div class="number" id="3">
                    <img src="https://hotel-istoria.ru/img/room/big_2Zxdr.JPG" alt="Круизный (студио)">
                    <span>
                        Круиз ( люкс )
                    </span>
                    <div class="price" id="3"></div>
                        <input type="text" class="price-input" name="price-input" placeholder="Новая цена">
                        <button class="button" id="3">Изменить</button>  
                </div>
                <div class="number" id="4">
                    <img src="https://hotel-istoria.ru/img/room/big_v2sGmD.JPG" alt="Традиция (люкс)">
                    <span>
                        Традиция ( люкс )
                    </span>
                    <div class="price" id="4"></div>
                        <input type="text" class="price-input" name="price-input" placeholder="Новая цена">
                        <button class="button" id="4">Изменить</button>  
                </div>
                <div class="number" id="5">
                    <img src="https://hotel-istoria.ru/img/room/big_i10OB.JPG" alt="Шоколадница">
                    <span>
                        Шоколадница
                    </span>
                    <div class="price" id="5"></div>
                        <input type="text" class="price-input" name="price-input" placeholder="Новая цена">
                        <button class="button" id="5">Изменить</button>  
                </div>
                <div class="number" id="6">
                    <img src="https://hotel-istoria.ru/img/room/big_mYuE4Y.JPG" alt="Азия">
                    <span>
                        Азия
                    </span>
                    <div class="price" id="6"></div>
                        <input type="text" class="price-input" name="price-input" placeholder="Новая цена">
                        <button class="button" id="6">Изменить</button>  
                </div>
                <div class="number" id="7">
                    <img src="https://hotel-istoria.ru/img/room/big_fZMK9g.JPG" alt="Джаз">
                    <span>
                        Джаз
                    </span>
                    <div class="price" id="7"></div>
                        <input type="text" class="price-input" name="price-input" placeholder="Новая цена">
                        <button class="button" id="7">Изменить</button>  
                </div>
                <div class="number" id="8">
                    <img src="https://hotel-istoria.ru/img/room/big_vSJvDC.JPG" alt="">
                    <span>
                        Прованс
                    </span>
                    <div class="price" id="8"></div>
                        <input type="text" class="price-input" name="price-input" placeholder="Новая цена">
                        <button class="button" id="8">Изменить</button>  
                </div>
                <div class="number" id="9">
                    <img src="https://hotel-istoria.ru/img/room/big_aVkH5.JPG" alt="Дача «Лаванда»">
                    <span>
                        Дача «Лаванда»
                    </span>
                    <div class="price" id="9"></div>
                        <input type="text" class="price-input" name="price-input" placeholder="Новая цена">
                        <button class="button" id="9">Изменить</button>  
                </div>
                <div class="number" id="10">
                    <img src="https://hotel-istoria.ru/img/room/big_u72XR3.JPG" alt="Дача «Розмарин»">
                    <span>
                        Дача «Розмарин»
                    </span>
                    <div class="price" id="10"></div>
                        <input type="text" class="price-input" name="price-input" placeholder="Новая цена">
                        <button class="button" id="10">Изменить</button>  
                </div>
            </div>
        </div>
        
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script>
        $.ajaxSetup({cache: false}); 
        var apiJSON;
        $.ajax({
            url: '../api/hotel.json',  
            method: 'get',             
            dataType: 'html',          
            success: function(data){   
                apiJSON = JSON.parse(data);
                console.log(apiJSON);
                for(var i = 0; i < apiJSON.length; i++){
                    $('#'+ apiJSON[i].id +' .price ').text('Текущая цена - ' + apiJSON[i].price +' руб.');
                }
            },
            error: function(jqXHR) {
                console.log(jqXHR.status);
                alert('ERROR: ' + jqXHR.status);
            }
        });

        ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        $('.price-button').click(function() {
            var query = $(this).parent().attr('id');
            var url = '../api/edit-price.php';
            var apiJSON;
            var price = $(this).prev().val();
            $.ajax({
                url: url,  
                method: 'get',
                data:{
                    id: query,
                    price: price
                },             
                dataType: 'html',          
                success: function(data){
                    $('#'+ query +' .price ').text('Текущая цена - ' + price +' руб.');   
                    alert("Готово!");
                },
                error: function(jqXHR) {
                    console.log(jqXHR.status);
                    alert('ERROR: ' + jqXHR.status);
                }
            });
        });
        ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    </script>
    </body>
    
</html>